<!DOCTYPE html>
<html lang="en" class="dark">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Samantha Weidner's Resume</title>
    <link rel="stylesheet" href="https://unpkg.com/rivet-core@2.9.0/css/rivet.min.css">
    <link rel="stylesheet" href="https://cdn.datatables.net/2.2.2/css/dataTables.dataTables.css" />
    <link rel="stylesheet" href="styles.css">

    <!-- fonts -->

    <!-- Cormorant -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cormorant:ital,wght@0,300..700;1,300..700&display=swap"
        rel="stylesheet">
    <!-- Open Sans -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Cormorant:ital,wght@0,300..700;1,300..700&family=Open+Sans:ital,wght@0,300..800;1,300..800&display=swap"
        rel="stylesheet">
        <script src="jquery-3.7.1.min.js"></script>
</head>

<style>
    main{
        padding-bottom: 10%;
    }

.topDiv {
    margin-top: 10%; /* Adjusted margin to a smaller value */
}

.dataTables_wrapper {
    color: white;
}

thead{
    background-color: rgba(150, 143, 143, 0);
}

.dataTables_wrapper table.dataTable thead th,
.dataTables_wrapper table.dataTable tbody td {
    color: white;
}

div.dt-info {
    color: white !important;
}

select.dt-input {
    color: white !important; 
    background-color: #333; 
}

select.dt-input option {
    color: white !important; 
    background-color: #333; 
}

input.dt-input {
    color: white !important; 
    background-color: #333; 
}

</style>

<body>
    <nav id="navbar">
        <div class="name">
            <h2> S a m a n t h a </h2>
            <h2 class="lastname waviy">
                <span style="--i:1">W</span>
                <span style="--i:2">e</span>
                <span style="--i:3">i</span>
                <span style="--i:4">d</span>
                <span style="--i:5">n</span>
                <span style="--i:6">e</span>
                <span style="--i:7">r </span>
            </h2>

        </div>
        <ul>
            <a href="index.html">
                <li>Home</li>
            </a>
            <a href="index.html#work">
                <li>Work</li>
            </a>
            <a href="resume.html">
                <li>Resume</li>
            </a>
        </ul>
    </nav>

    <main>
        <div class="txtSection topDiv">
            <h1 class="title">DataTable Inline Editor Example</h1>
            <p class="subtitle">This is an example of an inline editing script that I wrote using JQuery Datatables and Javascript.</p>
            <p class="subtitle">Click on a row to edit it, and click the "Save" button to save your changes. Alternatively, if you click on another row, your changes will be saved and you can begin to edit the other row. When a user's changes are saved, I update the data on the datatable as well as updating the UI to reflect the change.</p>
        </div>

        <!--DataTable-->
        <div class="dataTables">
            <!-- This example table data is from https://datatables.net/examples/basic_init/zero_configuration.html-->
            <table id="example" class="display" style="width:100%">
                <thead>
                    <tr>
                        <th>Name</th>
                        <th>Position</th>
                        <th>Office</th>
                        <th>Age</th>
                        <th>Start date</th>
                        <th>Salary</th>
                        <th></th>
                    </tr>
                </thead>
                <tbody>
                    <tr id="1">
                        <td>Tiger Nixon</td>
                        <td>System Architect</td>
                        <td>Edinburgh</td>
                        <td>61</td>
                        <td>2011-04-25</td>
                        <td>$320,800</td>
                        <td class="btn"></td>
                    </tr>
                    <tr id="2">
                        <td>Garrett Winters</td>
                        <td>Accountant</td>
                        <td>Tokyo</td>
                        <td>63</td>
                        <td>2011-07-25</td>
                        <td>$170,750</td>
                        <td class="btn"></td>
                    </tr>
                    <tr id="3">
                        <td>Ashton Cox</td>
                        <td>Junior Technical Author</td>
                        <td>San Francisco</td>
                        <td>66</td>
                        <td>2009-01-12</td>
                        <td>$86,000</td>
                        <td class="btn"></td>
                    </tr>
                    <tr id="4">
                        <td>Cedric Kelly</td>
                        <td>Senior Javascript Developer</td>
                        <td>Edinburgh</td>
                        <td>22</td>
                        <td>2012-03-29</td>
                        <td>$433,060</td>
                        <td class="btn"></td>
                    </tr>
                    <tr id="5">
                        <td>Airi Satou</td>
                        <td>Accountant</td>
                        <td>Tokyo</td>
                        <td>33</td>
                        <td>2008-11-28</td>
                        <td>$162,700</td>
                        <td class="btn"></td>
                    </tr>
                    <tr id="6">
                        <td>Brielle Williamson</td>
                        <td>Integration Specialist</td>
                        <td>New York</td>
                        <td>61</td>
                        <td>2012-12-02</td>
                        <td>$372,000</td>
                        <td class="btn"></td>
                    </tr>
                    <tr id="7">
                        <td>Herrod Chandler</td>
                        <td>Sales Assistant</td>
                        <td>San Francisco</td>
                        <td>59</td>
                        <td>2012-08-06</td>
                        <td>$137,500</td>
                        <td class="btn"></td>
                    </tr>
                    <tr id="8">
                        <td>Rhona Davidson</td>
                        <td>Integration Specialist</td>
                        <td>Tokyo</td>
                        <td>55</td>
                        <td>2010-10-14</td>
                        <td>$327,900</td>
                        <td class="btn"></td>
                    </tr>
                    <tr id="9">
                        <td>Colleen Hurst</td>
                        <td>Javascript Developer</td>
                        <td>San Francisco</td>
                        <td>39</td>
                        <td>2009-09-15</td>
                        <td>$205,500</td>
                        <td class="btn"></td>
                    </tr>
                    <tr id="10">
                        <td>Sonya Frost</td>
                        <td>Software Engineer</td>
                        <td>Edinburgh</td>
                        <td>23</td>
                        <td>2008-12-13</td>
                        <td>$103,600</td>
                        <td class="btn"></td>
                    </tr>
                </tbody>
            </table>
        </div>

        <div class="codeSection">
            <h1 class="title">Code</h1>
            <code data-lang="Javascript">
            <span class="comment">// Function to save the line being edited</span>
            function saveLine(table) { 
                var editingRow = document.querySelector('.editing');
                var rowData = $(`#${table}`).DataTable().row(`#${editingRow.getAttribute('id')}`).data();
                var counter = 0;
                editingRow.classList.remove('editing');
    
                $(editingRow).find('td').each(function () {
                    counter++;
                    var input = $(this).find('input');
                    if (input.length > 0) {
                        var value = input.val();
                        rowData[counter - 1] = value; 
                        $(this).text(value);
                    } else if ($(this).hasClass("btn")) {
                        $(this).html('');
                    }
                });
            }

              <span class="comment">//Grabbing all of the tables to add the event listener to the td </span>
              <span class="comment">//so that when you click on a td it will make the line editable</span>
                $('table').each(function(){
                    var table = $(this);
                        table.on('click', 'td', function (e) {
                        e.stopPropagation();
        
                        if ($(this).closest('tr').hasClass('editing')) {
                            return;
                        }
                        var editRowId = this.closest('tr').getAttribute('id');
                        editLine(editRowId, table.attr("id"));
                    })
                });
         
        <span class="comment">//Function to make the line editable</span>
             function editLine(editingRowId, table) {
               
                if ($('table').find('.editing').length > 0) {
                    saveLine(editingRowId);
                    return;
                }
               
                $(`#${editingRowId}`).addClass('editing');
                var rowData = $(`#${table}`).DataTable().row(`#${editingRowId}`).data();
                var counter = 0;
        
                $(`#${editingRowId}`).find('td').each(function () {
        
                    counter++;
                    console.log(counter);
        
                    if($(this).hasClass("noEdit")){
                        return;
                    }
                    else if ($(this).hasClass("btn")) {
                        var html = '&lt;button id="saveButton" class="rvt-button--plain"&gt;Save&lt;/button&gt;';
                        $(this).html(html);
                    }
                    else {
                        var value = rowData[counter - 1];
                        var dataType = typeof value;
                        $(this).html(`&lt;input type="text" id="${name}" class="rvt-text-input" name="${name}" value="${value}" /&gt;`);
                    }
        
                });
        
                document.querySelector('#saveButton').addEventListener('click', function () {
                    saveLine();
                });
             }

        <span class="comment">// Event listener for beforeunload to warn if there are unsaved changes</span>
            window.onbeforeunload = function () {
                if (document.getElementsByClassName("editing").length > 0) { return "Are you sure you want to leave?"; }
                else { return; }
            };

            </code>
        </div>
    </main>

</body>

</html>

<script src="https://cdn.datatables.net/2.2.2/js/dataTables.js"></script>
<script>

    $(document).ready(function() {
        $('#example').DataTable({
            paging: false,
        });

        //GRAB The Tables
        $('table').each(function(){
            var table = $(this);
                table.on('click', 'td', function (e) {
                e.stopPropagation();

                if ($(this).closest('tr').hasClass('editing')) {
                    return;
                }
                var editRowId = this.closest('tr').getAttribute('id');
                editLine(editRowId, table.attr("id"));
            })
        });
 
 //MAKE The EDIT Line
     function editLine(editingRowId, table) {
       
        if ($('table').find('.editing').length > 0) {
            saveLine(editingRowId);
            return;
        }
       
        $(`#${editingRowId}`).addClass('editing');
        var rowData = $(`#${table}`).DataTable().row(`#${editingRowId}`).data();
        var counter = 0;

        //Grab every td in the tr
        $(`#${editingRowId}`).find('td').each(function () {

            counter++;
            console.log(counter);

            if($(this).hasClass("noEdit")){
                return;
            }
            else if ($(this).hasClass("btn")) {
                var html = '<button id="saveButton" class="rvt-button">Save</button>';
                $(this).html(html);
            }
            else {
                var value = rowData[counter - 1];
                var dataType = typeof value;
                $(this).html(`<input type="${dataType}" id="${name}" class="rvt-text-input" name="${name}" value="${value}" />`);
            }

        });

        document.querySelector('#saveButton').addEventListener('click', function () {
            saveLine(table);
        });

     }

     function saveLine(table) {

            //get the row that is being edited  
            var editingRow = document.querySelector('.editing');
            var rowData = $(`#${table}`).DataTable().row(`#${editingRow.getAttribute('id')}`).data();
            var counter = 0;
            editingRow.classList.remove('editing');

            $(editingRow).find('td').each(function () {
                counter++;
                var input = $(this).find('input');
                if (input.length > 0) {
                    var value = input.val();
                    rowData[counter - 1] = value; 
                    $(this).text(value);
                } else if ($(this).hasClass("btn")) {
                    $(this).html('');
                }
            });
        }

    window.onbeforeunload = function () {
        if (document.getElementsByClassName("editing").length > 0) { return "Are you sure you want to leave?"; }
        else { return; }
    };

});
</script>