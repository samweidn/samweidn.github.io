<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Family App Demo</title>
    <!-- bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
    <!-- styles -->
    <link rel="stylesheet" href="css/familyapp.css">
</head>
<div class="phonescreen">

    <body>
        <!-- HEADER -->
        <header class="fixed-top">
            <div class="logo">
                <p>LOGO</p>
            </div>
            <div class="accountDiv">
                <img class="accountIconImage" src="images/account.jpg" alt="">
                <p>Account</p>
            </div>
        </header>

        <!-- MAIN CONTENT -->
        <main class="container">
            <h2>Reminders</h2>
            <div id="renindersContainer">
                <div class="ps-2 mb-3 border-start border-primary border-4">
                    <section class="d-flex justify-content-between">
                        <h5 class="noMargin">Call Your Sister</h5>
                        <div class="d-flex">
                            <p class="me-2 noMargin">&#9998;</p>
                            <p class="noMargin">&#128465;</p>
                        </div>
                    </section>
                    <section class="d-flex justify-content-between ms-2 me-2">
                        <p class="noMargin">Sarah</p>
                        <p class="noMargin">Today 5:00pm</p>
                    </section>
                    <section class="d-flex justify-content-between ms-2 me-2">
                        <p class="noMargin">Phone</p>
                        <p class="noMargin">Weekly</p>
                    </section>
                    <section class="d-flex justify-content-between ms-2 me-2">
                        <p class="noMargin"></p>
                    </section>
                </div>
                <div class="ps-2 mb-3 border-start border-success border-4">
                    <section class="d-flex justify-content-between">
                        <h5 class="noMargin">Plan Christmas</h5>
                        <div class="d-flex">
                            <p class="me-2 noMargin">&#9998;</p>
                            <p class="noMargin">&#128465;</p>
                        </div>
                    </section>
                    <section class="d-flex justify-content-between ms-2 me-2">
                        <p class="noMargin">Mom</p>
                        <p class="noMargin">December 5, 2025</p>
                    </section>
                    <section class="d-flex justify-content-between ms-2 me-2">
                        <p class="noMargin">Phone</p>
                    </section>
                    <section class="d-flex justify-content-between ms-2 me-2">
                        <p class="noMargin"></p>
                    </section>
                </div>
                <div class="d-flex justify-content-center">
                    <a class="btn btn-primary" href="reminderNew.html" onclick="getEventData(0)">Create New Reminder</a>
                </div>
            </div>
        </main>

        <!-- NAVIGATION -->
        <nav class="fixed-bottom">
            <ul>
                <a href="Index.html">
                    <li>
                        <img src="" alt=""></img>
                        <p>Family</p>
                    </li>
                </a>
                <a href="map.html">
                    <li>
                        <img src="" alt=""></img>
                        <p>Map</p>
                    </li>
                </a>
                <a href="calendar.html">
                    <li>
                        <img src="" alt="">
                        <p>Calendar</p>
                    </li>
                </a>
                <a href="reminder.html">
                    <li>
                        <img src="" alt=""></img>
                        <p>Reminders</p>
                    </li>
                </a>
            </ul>
        </nav>

        <!-- Scripts -->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI"
            crossorigin="anonymous"></script>
    </body>
</div>

</html>

<script>
    function getEventData(eventId) {
        let notificationDetails = {};

        if (eventId === 0) {
            notificationDetails = {
                notificationEvent: '',
                notificationDate: '',
                notificationPerson: ''
            }

        } else {
            let familyMemberEvents = JSON.parse(sessionStorage.getItem("jsonFamilyMemberEvents"));
            let familyMemberEvent = familyMemberEvents.filter(event => event.uniqueId == eventId);

            const notificationDetails = {
                notificationEvent: familyMemberEvent[0].eventName,
                notificationDate: familyMemberEvent[0].eventDateValue,
                notificationEventId: familyMemberEvent[0].uniqueId
            }
        }

        let jsonNotificationDetails = JSON.stringify(notificationDetails);
        sessionStorage.setItem("jsonNotificationDetails", jsonNotificationDetails);

    }

    // TODO: add function for putting in remidners that were made
    addReminders();
    function addReminders() {

        const allReminders = JSON.parse(sessionStorage.getItem('jsonReminders'));

        // TODO: order by the date ascending
        // allReminders.sort((a, b) => a.date.getTime() - b.date.getTime());

        allReminders.forEach(reminder => {
            var html = `<div class="ps-2 mb-3 border-start border-success border-4">`;
            html += ` <section class="d-flex justify-content-between">`;
            html += `<h5 class="noMargin">${reminder.name}</h5>`;
            html += `<div class="d-flex">`;
            html += `<p class="me-2 noMargin">&#9998;</p>`;
            html += `<p class="noMargin">&#128465;</p>`;
            html += `</div></section>`;
            html += `<section class="d-flex justify-content-between ms-2 me-2">`;
            html += `<p class="noMargin">${reminder.who}</p>`;
            html += `<p class="noMargin">${reminder.date}</p>`;
            html += `</section>`;
            html += `<section class="d-flex justify-content-between ms-2 me-2">`;
            html += `<p class="noMargin">${reminder.contactmethod}</p>`;
            html += `<p class="noMargin">${reminder.frequency}</p>`;
            html += `</section>`;
            html += `<section class="d-flex justify-content-between ms-2 me-2">`;
            html += ` <p class="noMargin">${reminder.linkedevent}</p>`;
            html += ` </section></div>`;

            var reminderContainer = document.querySelector('#renindersContainer');
            reminderContainer.insertAdjacentHTML('afterbegin', html);

        });

    }
</script>